{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lucas/OneDrive/Desktop/ws/Imobi-exspress-res/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/lucas/OneDrive/Desktop/ws/Imobi-exspress-res/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/lucas/OneDrive/Desktop/ws/Imobi-exspress-res/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lucas/OneDrive/Desktop/ws/Imobi-exspress-res/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from\"react\";import{useState}from\"react\";import{createContext}from\"react\";import{toast}from\"react-toastify\";import Api from\"../services/Api\";import{getLocalStorage,setLocalStorage}from\"./utils\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AppContext=/*#__PURE__*/createContext({});export var AppContextProvider=function AppContextProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){var user=getLocalStorage();if(user){setUser(user);console.log('Usuário logado',user);}},[]);function authenticate(_x,_x2){return _authenticate.apply(this,arguments);}function _authenticate(){_authenticate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Api.post('/session',{email:email,password:password}).then(function(response){if(!response.data.erro===true){toast(response.data.message);}var id=response.data.user.id;var email=response.data.user.email;var payload={token:response.data.token,email:email,id:id};setUser(payload);setLocalStorage(payload);window.location.href=\"/perfil\";}).catch(function(){console.log('Erro: App Error');});case 1:case\"end\":return _context.stop();}}},_callee);}));return _authenticate.apply(this,arguments);}function logout(){setUser(null);setLocalStorage(null);}return/*#__PURE__*/_jsx(AppContext.Provider,{value:_objectSpread(_objectSpread({},user),{},{authenticate:authenticate,logout:logout}),children:children});};","map":{"version":3,"names":["useEffect","useState","createContext","toast","Api","getLocalStorage","setLocalStorage","AppContext","AppContextProvider","children","user","setUser","console","log","authenticate","email","password","post","then","response","data","erro","message","id","payload","token","window","location","href","catch","logout"],"sources":["C:/Users/lucas/OneDrive/Desktop/ws/Imobi-exspress-res/src/context/AppContext.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { createContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport Api from \"../services/Api\";\r\nimport { getLocalStorage, setLocalStorage } from \"./utils\";\r\n\r\nexport const AppContext = createContext({});\r\n\r\nexport const AppContextProvider = ({ children }) => {\r\n  const [user, setUser] = useState();\r\n\r\n  useEffect(() => {\r\n    const user = getLocalStorage();\r\n    if (user) {\r\n      setUser(user);\r\n      console.log('Usuário logado', user);\r\n    }\r\n  }, []);\r\n\r\n  async function authenticate(email, password) {\r\n    Api.post('/session', { email, password })\r\n      .then((response) => {\r\n        if (!response.data.erro === true) {\r\n          toast(response.data.message)\r\n        }\r\n        const id = response.data.user.id;\r\n        const email = response.data.user.email;\r\n        const payload = { token: response.data.token, email, id }\r\n        setUser(payload);\r\n        setLocalStorage(payload);\r\n        window.location.href = \"/perfil\"\r\n      }).catch(() => {\r\n        console.log('Erro: App Error');\r\n      });\r\n  }\r\n\r\n  function logout() {\r\n    setUser(null);\r\n    setLocalStorage(null);\r\n  }\r\n\r\n  return (\r\n    <AppContext.Provider value={{ ...user, authenticate, logout }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  )\r\n}"],"mappings":"2jBAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,aAAT,KAA8B,OAA9B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,IAAP,KAAgB,iBAAhB,CACA,OAASC,eAAT,CAA0BC,eAA1B,KAAiD,SAAjD,C,2CAEA,MAAO,IAAMC,WAAU,cAAGL,aAAa,CAAC,EAAD,CAAhC,CAEP,MAAO,IAAMM,mBAAkB,CAAG,QAArBA,mBAAqB,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAClD,cAAwBR,QAAQ,EAAhC,wCAAOS,IAAP,eAAaC,OAAb,eAEAX,SAAS,CAAC,UAAM,CACd,GAAMU,KAAI,CAAGL,eAAe,EAA5B,CACA,GAAIK,IAAJ,CAAU,CACRC,OAAO,CAACD,IAAD,CAAP,CACAE,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BH,IAA9B,EACD,CACF,CANQ,CAMN,EANM,CAAT,CAHkD,QAWnCI,aAXmC,sJAWlD,iBAA4BC,KAA5B,CAAmCC,QAAnC,oHACEZ,GAAG,CAACa,IAAJ,CAAS,UAAT,CAAqB,CAAEF,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAArB,EACGE,IADH,CACQ,SAACC,QAAD,CAAc,CAClB,GAAI,CAACA,QAAQ,CAACC,IAAT,CAAcC,IAAf,GAAwB,IAA5B,CAAkC,CAChClB,KAAK,CAACgB,QAAQ,CAACC,IAAT,CAAcE,OAAf,CAAL,CACD,CACD,GAAMC,GAAE,CAAGJ,QAAQ,CAACC,IAAT,CAAcV,IAAd,CAAmBa,EAA9B,CACA,GAAMR,MAAK,CAAGI,QAAQ,CAACC,IAAT,CAAcV,IAAd,CAAmBK,KAAjC,CACA,GAAMS,QAAO,CAAG,CAAEC,KAAK,CAAEN,QAAQ,CAACC,IAAT,CAAcK,KAAvB,CAA8BV,KAAK,CAALA,KAA9B,CAAqCQ,EAAE,CAAFA,EAArC,CAAhB,CACAZ,OAAO,CAACa,OAAD,CAAP,CACAlB,eAAe,CAACkB,OAAD,CAAf,CACAE,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,SAAvB,CACD,CAXH,EAWKC,KAXL,CAWW,UAAM,CACbjB,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACD,CAbH,EADF,sDAXkD,+CA4BlD,QAASiB,OAAT,EAAkB,CAChBnB,OAAO,CAAC,IAAD,CAAP,CACAL,eAAe,CAAC,IAAD,CAAf,CACD,CAED,mBACE,KAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,gCAAOI,IAAP,MAAaI,YAAY,CAAZA,YAAb,CAA2BgB,MAAM,CAANA,MAA3B,EAA1B,UACGrB,QADH,EADF,CAKD,CAtCM"},"metadata":{},"sourceType":"module"}